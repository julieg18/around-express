(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{10:function(e,t,a){e.exports=a(16)},15:function(e,t,a){},16:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),i=(a(15),a(9)),l=a(1);var s=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"logo"}))},u=r.a.createContext({});var m=function(e){var t=e.onCardDelete,a=e.onCardLike,o=e.onCardClick,c=e.card,i=Object(n.useContext)(u)._id,l=c.link,s=c.name,m=c.likes,d=c.owner._id===i,f=c.likes.some((function(e){return e._id===i}));return r.a.createElement("li",{className:"element"},r.a.createElement("button",{className:"button element__delete-button ".concat(!d&&"element__delete-button_hidden"),onClick:function(){t(c)}}),r.a.createElement("img",{className:"element__image",alt:s,src:l,onClick:function(){o(c)}}),r.a.createElement("div",{className:"element__info"},r.a.createElement("p",{className:"element__title"},s),r.a.createElement("button",{onClick:function(){a(c)},className:"button element__like-button ".concat(f&&"element__like-button_active")}),r.a.createElement("p",{className:"element__likes-num"},m.length)))},d=a(6),f=a.n(d);var _=function(e){var t=e.cards,a=e.onCardLike,o=e.onEditAvatar,c=e.onEditProfile,i=e.onAddPlace,l=e.onCardClick,s=e.onDeleteCard,d=Object(n.useContext)(u),_=d.avatar,p=d.about,b=d.name;return r.a.createElement("main",null,r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__avatar"},r.a.createElement("img",{src:_||f.a,alt:"avatar",className:"profile__avatar-img"}),r.a.createElement("button",{className:"profile__change-avatar-button",onClick:o})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("p",{className:"profile__name"},b),r.a.createElement("button",{className:"button profile__button profile__button_type_edit",onClick:c}),r.a.createElement("p",{className:"profile__job"},p)),r.a.createElement("button",{className:"button profile__button profile__button_type_add",onClick:i})),r.a.createElement("section",{className:"elements"},r.a.createElement("ul",{className:"elements__list"},t.map((function(e){return r.a.createElement(m,{onCardDelete:s,onCardLike:a,onCardClick:l,card:e,key:e._id})})))))};var p=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Around The U.S."))};var b=function(e){var t=e.onClose,a=e.isOpen,n=e.card,o=n.link,c=n.name;return r.a.createElement("div",{onClick:function(e){e.target.classList.contains("popup")&&t()},className:"popup popup_content_picture ".concat(a&&"popup_opened")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"button popup__exit-button",onClick:t}),r.a.createElement("div",{className:"picture"},r.a.createElement("img",{alt:c,src:o,className:"picture__image"}),r.a.createElement("p",{className:"picture__title"},c))))};var h=function(e){var t=e.title,a=e.name,n=e.isOpen,o=e.children,c=e.onClose,i=e.onSubmit;return r.a.createElement("div",{onClick:function(e){e.target.classList.contains("popup")&&c()},className:"popup popup_content_".concat(a," ").concat(n&&"popup_opened")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"button popup__exit-button",onClick:c}),r.a.createElement("form",{onSubmit:i,className:"form form_type_".concat(a)},r.a.createElement("h1",{className:"form__heading"},t),o)))},v=function(e){var t=e.isOpen,a=e.onClose,o=e.onUpdateUser,c=Object(n.useState)(""),i=Object(l.a)(c,2),s=i[0],m=i[1],d=Object(n.useState)(""),f=Object(l.a)(d,2),_=f[0],p=f[1],b=Object(n.useState)(""),v=Object(l.a)(b,2),E=v[0],O=v[1],g=Object(n.useState)(""),j=Object(l.a)(g,2),k=j[0],C=j[1],y=Object(n.useState)(!1),N=Object(l.a)(y,2),S=N[0],L=N[1],U=Object(n.useState)(!0),w=Object(l.a)(U,2),x=w[0],A=w[1],D=Object(n.useState)(!0),P=Object(l.a)(D,2),I=P[0],R=P[1],T=Object(n.useContext)(u);return Object(n.useEffect)((function(){var e=T.name,t=T.about;p(t),m(e)}),[T]),r.a.createElement(h,{name:"edit-profile-form",title:"Edit profile",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),L(!0),o({name:s,about:_}).then((function(){L(!1)}))}},r.a.createElement("label",{className:"form__label",htmlFor:"name-field"},r.a.createElement("input",{onChange:function(e){var t=e.target;m(t.value),A(t.validity.valid),O(t.validationMessage)},defaultValue:s,type:"text",className:"form__field form__field_type_name ".concat(!x&&"form__field_type_error"),id:"name-field",minLength:"2",maxLength:"40",pattern:"[a-zA-Z -]{1,}",required:!0}),r.a.createElement("span",{className:"form__field-error ".concat(!x&&"form__field-error_active"),id:"name-field-error"},E)),r.a.createElement("label",{className:"form__label",htmlFor:"job-field"},r.a.createElement("input",{onChange:function(e){var t=e.target;p(t.value),R(t.validity.valid),C(t.validationMessage)},defaultValue:_,type:"text",className:"form__field form__field_type_job ".concat(!I&&"form__field_type_error"),id:"job-field",minLength:"2",maxLength:"200",required:!0}),r.a.createElement("span",{className:"form__field-error ".concat(!I&&"form__field-error_active"),id:"job-field-error"},k)),r.a.createElement("button",{type:"submit",className:"form__submit-button form__submit-button_type_edit-profile",disabled:!x||!I},S?"Saving...":"Save"))};var E=function(e){var t=e.isOpen,a=e.onClose,o=e.onUpdateAvatar,c=Object(n.useRef)(null),i=Object(n.useState)(!0),s=Object(l.a)(i,2),u=s[0],m=s[1],d=Object(n.useState)(""),f=Object(l.a)(d,2),_=f[0],p=f[1],b=Object(n.useState)(!1),v=Object(l.a)(b,2),E=v[0],O=v[1],g=Object(n.useState)(!1),j=Object(l.a)(g,2),k=j[0],C=j[1];return r.a.createElement(h,{name:"change-avatar-form",title:"Change profile picture",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),O(!0),o({avatar:c.current.value}).then((function(){O(!1),c.current.value="",C(!1)}))}},r.a.createElement("label",{htmlFor:"avatar-img-field",className:"form__label"},r.a.createElement("input",{ref:c,placeholder:"Image-link",type:"url",className:"form__field form__field_type_avatar-img ".concat(!u&&"form__field_type_error"),id:"avatar-img-field",onChange:function(e){var t=e.target;m(t.validity.valid),p(t.validationMessage),C(t.validity.valid)},required:!0}),r.a.createElement("span",{className:"form__field-error ".concat(!u&&"form__field-error_active"),id:"avatar-img-field-error"},_)),r.a.createElement("button",{type:"submit",className:"form__submit-button form__submit-button_type_change-avatar",disabled:!k},E?"Saving...":"Save"))};var O=function(e){var t=e.isOpen,a=e.onClose,o=e.onCreatePlace,c=Object(n.useState)(""),i=Object(l.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(!0),d=Object(l.a)(m,2),f=d[0],_=d[1],p=Object(n.useState)(""),b=Object(l.a)(p,2),v=b[0],E=b[1],O=Object(n.useState)(""),g=Object(l.a)(O,2),j=g[0],k=g[1],C=Object(n.useState)(!0),y=Object(l.a)(C,2),N=y[0],S=y[1],L=Object(n.useState)(""),U=Object(l.a)(L,2),w=U[0],x=U[1],A=Object(n.useState)(!1),D=Object(l.a)(A,2),P=D[0],I=D[1];return r.a.createElement(h,{name:"add-card-form",title:"New place",isOpen:t,onClose:a,onSubmit:function(e){e.preventDefault(),I(!0),o({name:s,link:j}).then((function(){u(""),k("")})).then((function(){I(!1)}))}},r.a.createElement("label",{htmlFor:"title-field",className:"form__label"},r.a.createElement("input",{onChange:function(e){var t=e.target;u(t.value),_(t.validity.valid),E(t.validationMessage)},value:s,placeholder:"Title",type:"text",className:"form__field form__field_type_title ".concat(!f&&"form__field_type_error"),id:"title-field",minLength:"2",maxLength:"30",required:!0}),r.a.createElement("span",{className:"form__field-error ".concat(!f&&"form__field-error_active"),id:"title-field-error"},v)),r.a.createElement("label",{htmlFor:"img-link-field",className:"form__label"},r.a.createElement("input",{onChange:function(e){var t=e.target;k(t.value),S(t.validity.valid),x(t.validationMessage)},placeholder:"Image-link",type:"url",value:j,className:"form__field form__field_type_img-link ".concat(!N&&"form__field_type_error"),id:"img-link-field",required:!0}),r.a.createElement("span",{className:"form__field-error ".concat(!N&&"form__field-error_active"),id:"img-link-field-error"},w)),r.a.createElement("button",{type:"submit",className:"form__submit-button form__submit-button_type_add-card",disabled:!f||!N||0===s.length||0===j.length},P?"Saving...":"Create"))};var g=function(e){var t=e.isOpen,a=e.onClose,o=e.onDeleteCard,c=Object(n.useState)(!1),i=Object(l.a)(c,2),s=i[0],u=i[1];return r.a.createElement(h,{name:"delete-cart-form",title:"Are you sure?",onClose:a,isOpen:t,onSubmit:function(e){e.preventDefault(),u(!0),o().then((function(){u(!1)}))}},r.a.createElement("button",{className:"form__submit-button form__submit-button_type_delete-card"},s?"Saving...":"Yes"))},j=a(7),k=a(8),C=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(j.a)(this,e),this._baseUrl=a,this._headers=n}return Object(k.a)(e,[{key:"_checkServerResponse",value:function(e){return e.ok?e.json():Promise.reject("Err: ".concat(e.status))}},{key:"getUser",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkServerResponse).catch((function(e){console.log(e)}))}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkServerResponse).catch((function(e){console.log(e)}))}},{key:"editUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkServerResponse).catch((function(e){console.log(e)}))}},{key:"editUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkServerResponse).catch((function(e){console.log(e)}))}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkServerResponse).catch((function(e){console.log(e)}))}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkServerResponse).catch((function(e){console.log(e)}))}},{key:"editCardLikes",value:function(e){var t=e.cardWasLiked,a=e.cardId;return fetch("".concat(this._baseUrl,"/cards/likes/").concat(a),{method:t?"PUT":"DELETE",headers:this._headers}).then(this._checkServerResponse).catch((function(e){console.log(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-1",headers:{authorization:"b5addf89-e4e2-4334-ba86-da0986124fda","Content-Type":"application/json"}});var y=function(){var e,t=Object(n.useState)(!1),a=Object(l.a)(t,2),o=a[0],c=a[1],m=Object(n.useState)(!1),d=Object(l.a)(m,2),f=d[0],h=d[1],j=Object(n.useState)(!1),k=Object(l.a)(j,2),y=k[0],N=k[1],S=Object(n.useState)(!1),L=Object(l.a)(S,2),U=L[0],w=L[1],x=Object(n.useState)(!1),A=Object(l.a)(x,2),D=A[0],P=A[1],I=Object(n.useState)({}),R=Object(l.a)(I,2),T=R[0],M=R[1],q=Object(n.useState)({}),F=Object(l.a)(q,2),J=F[0],W=F[1],z=Object(n.useState)([]),B=Object(l.a)(z,2),H=B[0],V=B[1];function Y(e){"Escape"===e.key&&Z()}function Z(){window.removeEventListener("keyup",Y),N(!1),c(!1),h(!1),w(!1),P(!1)}return e=function(){C.getUser().then((function(e){W(e)})),C.getInitialCards().then((function(e){V(e)}))},Object(n.useEffect)(e,[]),r.a.createElement(u.Provider,{value:J},r.a.createElement(s,null),r.a.createElement(_,{cards:H,onEditAvatar:function(){window.addEventListener("keyup",Y),h(!0)},onEditProfile:function(){window.addEventListener("keyup",Y),c(!0)},onAddPlace:function(){window.addEventListener("keyup",Y),N(!0)},onDeleteCard:function(e){M(e),window.addEventListener("keyup",Y),P(!0)},onCardClick:function(e){M(e),window.addEventListener("keyup",Y),w(!0)},onCardLike:function(e){var t=!e.likes.some((function(e){return e._id===J._id}));C.editCardLikes({cardWasLiked:t,cardId:e._id}).then((function(t){var a=H.map((function(a){return a._id===e._id?t:a}));V(a)}))}}),r.a.createElement(p,null),r.a.createElement(v,{isOpen:o,onClose:Z,onUpdateUser:function(e){return C.editUserInfo(e).then((function(e){W(e),Z()}))}}),r.a.createElement(E,{isOpen:f,onClose:Z,onUpdateAvatar:function(e){return C.editUserAvatar(e).then((function(e){W(e),Z()}))}}),r.a.createElement(O,{isOpen:y,onClose:Z,onCreatePlace:function(e){return C.addCard(e).then((function(e){V([e].concat(Object(i.a)(H))),Z()}))}}),r.a.createElement(b,{isOpen:U,card:T,onClose:Z}),r.a.createElement(g,{isOpen:D,onClose:Z,onDeleteCard:function(){return C.deleteCard(T._id).then((function(){var e=H.filter((function(e){return e._id!==T._id}));V(e),Z()}))}}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports=a.p+"static/media/avatar-image.256a3224.jpg"}},[[10,1,2]]]);
//# sourceMappingURL=main.d93af336.chunk.js.map